# Operator 3.37.0 — Vision Intake & Mobile Triage (2025-11-25)

## Highlights
- **Investigation photos → summaries**: Drag/drop `Scan Investigation Report` modal (type + DD/MM/YYYY metadata) feeds `InvestigationImageExtractor` + `LMStudioService.processWithVisionAgent` (default `qwen3-vl-8b-instruct`) to turn report images into dictated text with OCR explanation + processing time captured.
- **Quick Actions refresh**: Investigation Summary offers Dictate / Type / Image flows; collapsible 5-column action grid; Appointment Wrap-Up remains a full-panel builder; new `PipelineStrip`, `Tag`, `MicroMeter`, `AudioScrubber`, and simplified monochrome LiveAudioVisualizer theme.
- **Mobile/Shortcut ingest**: macOS daemon now stages Shortcut sidecars (workflow_code, timestamps, geolocation) with jobs and uses hints during triage; side-panel attachment modal groups agents with previews, confidence chips, workflow-code defaults, and number-key shortcuts.
- **Rounds improvements**: Go To patient navigation, undoable ward updates, discharge/reopen toggles, checkboxable handover composer, and GP discharge letter generation from recent ward data.
- **Model safety & telemetry**: Default OCR getter, richer vision diagnostics, Whisper timeout guidance, ASR correction seed updates, and a formatting processing state surfaced to sessions/results.

## Upgrade Notes
- Load a vision-capable model in LM Studio (default `qwen3-vl-8b-instruct`) for image ingestion; keep MedGemma-27B + Gemma-3n-e4b for reasoning/simple tasks.
- mac_daemon now expects Shortcut sidecars next to audio; ensure Shortcuts export JSON sidecars with `workflow_code` when possible.
- Rebuild the extension after pulling (`npm install` if dependencies changed, then `npm run build`) to pick up new UI primitives and investigation modal.

## Validation Checklist
- Investigation Summary → “Image” path: upload a JPEG/PNG/WebP under 10MB, confirm extraction text appears with processing time and no empty-response warning.
- Mobile jobs modal: open grouped view, use number keys to select agents, confirm header/preview and confidence chips render; attach a Shortcut-sourced job and ensure workflow_code mapping is respected.
- Rounds: generate GP letter for an active patient, toggle discharge/undo, run ward update dictation diff, and compile a checkbox-filtered handover.
- Whisper/LM Studio health: `curl http://localhost:8001/v1/health` and `curl http://localhost:1234/v1/models` before first run; vision calls should log model name + token limits.
